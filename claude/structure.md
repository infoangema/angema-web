# Estructura TÃ©cnica del Proyecto - Angema Web

## InformaciÃ³n TÃ©cnica del Proyecto

**Proyecto**: Angema Web - Portfolio y StockIn Manager  
**Framework**: Angular 19 (Standalone Components)  
**Stack**: TypeScript 5.7, RxJS 7.8, Bootstrap 5.3.3, TailwindCSS, Flowbite  
**Backend**: Firebase (Firestore, Authentication, Storage)  
**Deployment**: Vercel  

## Arquitectura de la AplicaciÃ³n

### Tipo de AplicaciÃ³n
- **Single Page Application (SPA)** con routing del lado del cliente
- **Standalone Components**: Sin NgModules, usando standalone components con imports explÃ­citos
- **Lazy Loading**: MÃ³dulos cargados bajo demanda
- **Responsive Design**: Bootstrap 5 + TailwindCSS + CSS personalizado

### Patrones ArquitectÃ³nicos

#### Routing
- Client-side routing con fallback a home page
- Wildcard routing para rutas desconocidas
- AuthGuards para protecciÃ³n de rutas
- ConfiguraciÃ³n SPA en Vercel

#### GestiÃ³n de Estado
- **LocalStorage**: Persistencia de estado del spinner
- **Services**: Estado compartido usando Angular services
- **RxJS Observables**: Flujo de datos reactivo
- **No State Management Library**: Usa servicios nativos de Angular

#### Servicios y OrganizaciÃ³n
- **Core Services**: AutenticaciÃ³n, base de datos, notificaciones
- **Module Services**: Servicios especÃ­ficos por mÃ³dulo (productos, categorÃ­as, etc.)
- **Shared Services**: Servicios reutilizables entre mÃ³dulos

## Estructura de Directorios

### Core Structure
```
src/app/
â”œâ”€â”€ core/                     # NÃºcleo de la aplicaciÃ³n
â”‚   â”œâ”€â”€ guards/              # ProtecciÃ³n de rutas
â”‚   â”œâ”€â”€ models/              # Modelos de datos core
â”‚   â””â”€â”€ services/            # Servicios fundamentales
â”œâ”€â”€ shared/                  # Componentes reutilizables
â”œâ”€â”€ modules/                 # MÃ³dulos funcionales
â””â”€â”€ config/                  # Configuraciones globales
```

### MÃ³dulo StockIn Manager
```
modules/stockin-manager/
â”œâ”€â”€ components/              # Componentes del mÃ³dulo
â”‚   â”œâ”€â”€ shared/             # Navbar especÃ­fico del mÃ³dulo
â”‚   â””â”€â”€ business-selector-modal/
â”œâ”€â”€ models/                 # Modelos de datos del mÃ³dulo
â”œâ”€â”€ pages/                  # PÃ¡ginas/Componentes de ruta
â”œâ”€â”€ services/               # Servicios especÃ­ficos del mÃ³dulo
â””â”€â”€ stockin-manager.module.ts
```

### PÃ¡ginas Implementadas
```
pages/
â”œâ”€â”€ attributes/             # GestiÃ³n de atributos dinÃ¡micos
â”‚   â”œâ”€â”€ create-attribute/   # Modal de creaciÃ³n
â”‚   â”œâ”€â”€ edit-attribute/     # Modal de ediciÃ³n
â”‚   â””â”€â”€ attributes.page.ts  # PÃ¡gina principal
â”œâ”€â”€ products/               # GestiÃ³n de productos
â”‚   â”œâ”€â”€ create-product/     # Modal de creaciÃ³n
â”‚   â”œâ”€â”€ edit-product/       # Modal de ediciÃ³n
â”‚   â”œâ”€â”€ products-list/      # Lista de productos
â”‚   â””â”€â”€ products.page.ts    # PÃ¡gina principal
â”œâ”€â”€ categories/             # GestiÃ³n de categorÃ­as
â”œâ”€â”€ warehouses/             # GestiÃ³n de almacenes
â”œâ”€â”€ customers/              # GestiÃ³n de clientes/CRM
â”‚   â”œâ”€â”€ create-customer/    # Modal de creaciÃ³n
â”‚   â”œâ”€â”€ edit-customer/      # Modal de ediciÃ³n
â”‚   â”œâ”€â”€ customers-list/     # Lista de clientes
â”‚   â”œâ”€â”€ customer-history/   # Historial de compras
â”‚   â”œâ”€â”€ customer-segments/  # SegmentaciÃ³n de clientes
â”‚   â””â”€â”€ customers.page.ts   # PÃ¡gina principal
â”œâ”€â”€ dashboard/              # Panel principal
â”œâ”€â”€ login/                  # AutenticaciÃ³n
â””â”€â”€ root-admin/             # AdministraciÃ³n root
```

## Modelos de Datos

### Firestore Collections

#### Users Collection
```typescript
interface UserProfile {
  uid: string;
  businessId: string;
  roleId: 'root' | 'admin' | 'user';
  email: string;
  displayName: string;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Business Collection
```typescript
interface Business {
  id: string;
  name: string;
  description?: string;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Products Collection (SKU)
```typescript
interface SKU {
  id: string;
  businessId: string;
  code: string;           // SKU generado automÃ¡ticamente
  name: string;
  description?: string;
  category: string;       // ID de categorÃ­a
  color: string;          // CÃ³digo de atributo
  size: string;           // CÃ³digo de atributo
  material: string;       // CÃ³digo de atributo
  grams: number;          // Campo en inglÃ©s
  cost: number;           // Solo admin/root
  price: number;
  stock: number;
  minStock: number;
  maxStock: number;
  position?: string;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Attributes Collection
```typescript
interface Attribute {
  id: string;
  businessId: string;
  type: 'color' | 'size' | 'material';
  code: string;           // Ej: "ROJ", "XL", "ALG"
  name: string;           // Ej: "Rojo", "Extra Large", "AlgodÃ³n"
  description?: string;
  isActive: boolean;
  sortOrder?: number;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Categories Collection
```typescript
interface Category {
  id: string;
  businessId: string;
  name: string;
  description?: string;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Warehouses Collection
```typescript
interface Warehouse {
  id: string;
  businessId: string;
  name: string;
  address?: string;
  description?: string;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Customers Collection
```typescript
interface Customer {
  id: string;
  businessId: string;
  code: string;           // CÃ³digo Ãºnico generado automÃ¡ticamente
  firstName: string;
  lastName: string;
  email: string;
  phone?: string;
  documentType?: 'dni' | 'passport' | 'license' | 'ruc' | 'other';
  documentNumber?: string;
  address?: string;
  city?: string;
  state?: string;
  country?: string;
  postalCode?: string;
  customerType: 'individual' | 'business' | 'wholesale' | 'vip';
  isActive: boolean;
  creditLimit: number;
  loyaltyPoints: number;
  totalPurchases: number;
  customerSince: Date;
  lastPurchaseDate?: Date;
  notes?: string;
  createdAt: Date;
  updatedAt: Date;
}
```

## Servicios Principales

### Core Services

#### DatabaseService
- **PropÃ³sito**: AbstracciÃ³n para operaciones CRUD en Firestore
- **MÃ©todos**: create, getById, update, delete, getAll, getWhere, query
- **Optimizaciones**: Client-side filtering, duplicate prevention
- **Uso**: Base para todos los servicios de datos

#### AuthService
- **PropÃ³sito**: GestiÃ³n de autenticaciÃ³n y autorizaciÃ³n
- **Funcionalidades**: Login, logout, roles, permisos, sesiÃ³n persistente
- **Guards**: ProtecciÃ³n de rutas basada en roles

#### BusinessService
- **PropÃ³sito**: GestiÃ³n de negocios y contexto empresarial
- **Funcionalidades**: CRUD negocios, contexto actual, validaciones

### Module Services

#### AttributeService
- **PropÃ³sito**: GestiÃ³n de atributos dinÃ¡micos para productos
- **Funcionalidades**: CRUD atributos, filtrado por tipo, validaciÃ³n de cÃ³digos Ãºnicos
- **Business Logic**: Aislamiento por negocio, opciones predefinidas

#### ProductService
- **PropÃ³sito**: GestiÃ³n completa de productos (SKUs)
- **Funcionalidades**: CRUD productos, bÃºsqueda, filtros, paginaciÃ³n
- **SKU Generation**: GeneraciÃ³n automÃ¡tica de cÃ³digos SKU

#### CustomerService
- **PropÃ³sito**: GestiÃ³n completa de clientes/CRM
- **Funcionalidades**: CRUD clientes, bÃºsqueda, filtros, exportaciÃ³n CSV
- **Features**: Puntos de fidelizaciÃ³n, segmentaciÃ³n, historial de compras
- **Business Logic**: Aislamiento por negocio, cÃ³digos Ãºnicos de cliente

#### RootBusinessSelectorService
- **PropÃ³sito**: GestiÃ³n de selecciÃ³n de negocio para usuarios root
- **Funcionalidades**: SelecciÃ³n reactiva, persistencia en sesiÃ³n
- **Features**: Observable de cambios, validaciÃ³n de selecciÃ³n

## Configuraciones TÃ©cnicas

### Angular Configuration
```typescript
// angular.json - Build Configuration
{
  "budgets": [
    {
      "type": "initial",
      "maximumWarning": "2mb",
      "maximumError": "5mb"
    }
  ]
}
```

### Firebase Configuration
```typescript
// firebase.config.ts
export const firebaseConfig = {
  // ConfiguraciÃ³n especÃ­fica por environment
  apiKey: "...",
  authDomain: "...",
  projectId: "...",
  // etc.
}
```

### Vercel Configuration
```json
// vercel.json - SPA Routing
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
```

## Convenciones de Desarrollo

### Angular 17+ Features
- **Control Flow**: `@for`, `@if`, `@else` en lugar de `*ngFor`, `*ngIf`
- **Standalone Components**: Sin NgModules
- **Imports explÃ­citos**: Cada componente importa lo que necesita

### TypeScript
- **Strict Mode**: CompilaciÃ³n estricta habilitada
- **Type Safety**: Interfaces para todos los modelos
- **Generics**: DatabaseService con tipos genÃ©ricos

### Firestore Best Practices
- **Business Isolation**: Datos separados por businessId
- **Simple Queries**: Evitar Ã­ndices complejos con client-side filtering
- **Real-time Updates**: Observable patterns para actualizaciones inmediatas

### Component Organization
- **Standalone**: Todos los componentes son standalone
- **Separation**: HTML, CSS y TS en archivos separados
- **Modular**: Componentes pequeÃ±os y cohesivos

## Performance Optimizations

### Bundle Size
- **Lazy Loading**: MÃ³dulos cargados bajo demanda
- **Tree Shaking**: EliminaciÃ³n de cÃ³digo no usado
- **Bundle Analysis**: LÃ­mites de tamaÃ±o configurados

### Firestore Optimizations
- **Client-side Filtering**: Para evitar Ã­ndices complejos
- **Pagination**: Carga incremental de datos
- **Real-time Subscriptions**: Solo donde es necesario

### UI/UX Optimizations
- **Responsive Design**: Mobile-first approach
- **Loading States**: Spinners y skeleton screens
- **Error Handling**: Notificaciones user-friendly

---

## ðŸ“– GuÃ­as de Uso de Servicios

### RootBusinessSelectorService

#### PropÃ³sito
Gestiona la selecciÃ³n de negocio para usuarios root, permitiendo cambiar entre diferentes negocios o ver datos agregados de todos.

#### Uso BÃ¡sico
```typescript
// En un servicio que necesita filtrar por negocio
constructor(private rootBusinessSelector: RootBusinessSelectorService) {}

// Para usuarios root - Obtener selecciÃ³n actual
const businessId = this.rootBusinessSelector.getEffectiveBusinessId();

// Escuchar cambios en la selecciÃ³n
this.rootBusinessSelector.selection$.subscribe(selection => {
  console.log('Nueva selecciÃ³n:', selection);
});
```

#### Patrones de ImplementaciÃ³n

##### 1. Servicios Reactivos (Recomendado)
```typescript
// En servicios de datos como CustomerService, ProductService, etc.
watchData(): Observable<T[]> {
  const isRoot = this.authService.isRoot();

  if (isRoot) {
    // Reactivo a cambios de selecciÃ³n
    return this.rootBusinessSelector.selection$.pipe(
      switchMap(selection => {
        const businessId = selection.showAll ? null : selection.businessId;
        
        if (businessId) {
          return this.databaseService.getWhere<T>('collection', 'businessId', '==', businessId);
        } else if (selection.showAll) {
          return this.databaseService.getAll<T>('collection');
        } else {
          return of([]); // No hay selecciÃ³n vÃ¡lida
        }
      })
    );
  } else {
    // Para usuarios no-root, usar businessId fijo
    return from(this.businessService.getCurrentBusinessId()).pipe(
      switchMap(id => this.databaseService.getWhere<T>('collection', 'businessId', '==', id))
    );
  }
}
```

##### 2. MÃ©todos CRUD
```typescript
async createData(data: T): Promise<string> {
  const isRoot = this.authService.isRoot();
  let businessId: string | null = null;

  if (isRoot) {
    businessId = this.rootBusinessSelector.getEffectiveBusinessId();
  } else {
    businessId = await this.businessService.getCurrentBusinessId();
  }

  if (!businessId) {
    throw new Error('No se encontrÃ³ el ID del negocio');
  }

  return this.databaseService.create('collection', { ...data, businessId });
}
```

#### Estados de SelecciÃ³n

| Estado | `businessId` | `showAll` | Comportamiento |
|--------|--------------|-----------|----------------|
| Sin selecciÃ³n | `null` | `false` | Mostrar vacÃ­o o requerir selecciÃ³n |
| Negocio especÃ­fico | `string` | `false` | Filtrar por businessId |
| Ver todos | `null` | `true` | Mostrar todos los negocios |

#### ValidaciÃ³n de SelecciÃ³n
```typescript
// Verificar si hay una selecciÃ³n vÃ¡lida
if (!this.rootBusinessSelector.hasValidSelection()) {
  // Mostrar modal de selecciÃ³n o redirigir
  this.openBusinessSelector();
}
```

### ModalService

#### PropÃ³sito
Gestiona modales dinÃ¡micos creados programÃ¡ticamente, especialmente para el navbar y componentes compartidos.

#### Setup Requerido
```typescript
// En cada pÃ¡gina que incluye navbar o usa modales dinÃ¡micos
import { ViewContainerRef, AfterViewInit } from '@angular/core';

export class PageComponent implements AfterViewInit {
  @ViewChild('modalContainer', { read: ViewContainerRef }) modalContainer!: ViewContainerRef;

  constructor(private modalService: ModalService) {}

  ngAfterViewInit() {
    this.modalService.setModalContainer(this.modalContainer);
  }
}
```

```html
<!-- En el template de la pÃ¡gina -->
<!-- Modal Container for Dynamic Modals -->
<div #modalContainer></div>
```

#### Uso BÃ¡sico
```typescript
// Abrir modal dinÃ¡mico
await this.modalService.open(BusinessSelectorModalComponent);

// Con datos
await this.modalService.open(EditModalComponent, { itemId: '123' });

// Cerrar modal
this.modalService.closeModal();
```

#### Compatibilidad Dual en Componentes de Modal
```typescript
// En componentes que se usan tanto dinÃ¡micamente como con binding directo
@Output() modalClosed = new EventEmitter<void>();

closeModal(): void {
  // Emitir evento para modales con binding directo
  this.modalClosed.emit();
  
  // TambiÃ©n usar ModalService para modales dinÃ¡micos
  try {
    this.modalService.closeModal();
  } catch (error) {
    console.log('ModalService not available, using direct event emission');
  }
}
```

### CustomerService

#### PropÃ³sito
Gestiona operaciones CRUD para clientes con aislamiento por negocio y funcionalidades de CRM.

#### CaracterÃ­sticas Principales
- **Aislamiento por Negocio**: Datos separados por `businessId`
- **Reactivo**: Se actualiza automÃ¡ticamente con cambios de selecciÃ³n de negocio
- **CRM Features**: Puntos de fidelizaciÃ³n, segmentaciÃ³n, historial
- **Export**: ExportaciÃ³n a CSV

#### Uso BÃ¡sico
```typescript
// Observar clientes (reactivo)
this.customerService.watchCustomers().subscribe(customers => {
  console.log('Clientes:', customers);
});

// Crear cliente
await this.customerService.createCustomer({
  firstName: 'Juan',
  lastName: 'PÃ©rez',
  email: 'juan@example.com',
  customerType: 'individual'
});

// Actualizar cliente
await this.customerService.updateCustomer(customerId, {
  phone: '+1234567890'
});
```

#### BÃºsqueda y Filtros
```typescript
// BÃºsqueda con filtros
const filters: CustomerFilters = {
  search: 'juan',
  type: 'individual',
  active: true,
  city: 'Madrid'
};

this.customerService.searchCustomers(filters).subscribe(results => {
  console.log('Resultados:', results);
});
```

#### Funcionalidades CRM
```typescript
// Actualizar puntos de fidelizaciÃ³n
await this.customerService.updateLoyaltyPoints(customerId, 100, 'add');

// Actualizar total de compras
await this.customerService.updateTotalPurchases(customerId, 299.99);

// EstadÃ­sticas
this.customerService.getCustomerStats().subscribe(stats => {
  console.log('EstadÃ­sticas:', stats);
});

// Exportar a CSV
const csvContent = await this.customerService.exportCustomersToCSV();
```

### DatabaseService

#### PropÃ³sito
Capa de abstracciÃ³n para operaciones Firestore con optimizaciones y filtrado de duplicados.

#### MÃ©todos Principales

##### Operaciones CRUD
```typescript
// Crear documento
const id = await this.databaseService.create('collection', data);

// Obtener por ID
const item = await this.databaseService.getById<T>('collection', id);

// Actualizar
await this.databaseService.update('collection', id, updateData);

// Soft delete
await this.databaseService.softDelete('collection', id);
```

##### Consultas Reactivas
```typescript
// Observar todos los documentos
this.databaseService.getAll<T>('collection').subscribe(items => {
  console.log('Items:', items);
});

// Observar con filtro WHERE
this.databaseService.getWhere<T>('collection', 'field', '==', 'value')
  .subscribe(items => {
    console.log('Filtered items:', items);
  });
```

##### Consultas Una Sola Vez
```typescript
// Obtener una sola vez (Promise)
const items = await this.databaseService.getOnce<T>('collection');

// Con filtros
const filtered = await this.databaseService.getOnce<T>(
  'collection', 
  where('field', '==', 'value')
);
```

##### Consultas Complejas con PaginaciÃ³n
```typescript
const result = await this.databaseService.query<T>('collection', {
  where: [
    { field: 'status', operator: '==', value: 'active' },
    { field: 'category', operator: '==', value: 'electronics' }
  ],
  orderBy: [
    { field: 'createdAt', direction: 'desc' }
  ],
  pageSize: 10,
  startAfter: lastDoc
});

console.log('Items:', result.items);
console.log('Has more:', result.hasMore);
```

#### Mejores PrÃ¡cticas

##### 1. Aislamiento por Negocio
```typescript
// Siempre incluir businessId en operaciones multi-tenant
const data = {
  ...userData,
  businessId: await this.getBusinessId()
};
```

##### 2. Filtrado de Duplicados AutomÃ¡tico
```typescript
// El DatabaseService automÃ¡ticamente filtra duplicados
// No es necesario implementar lÃ³gica adicional
const items = await this.databaseService.getOnce<T>('collection');
// items garantizado sin duplicados
```

##### 3. Manejo de Timestamps
```typescript
// NO incluir createdAt/updatedAt manualmente
const data = {
  name: 'Product',
  price: 100
  // createdAt y updatedAt se agregan automÃ¡ticamente
};
```

### NotificationService

#### PropÃ³sito
Gestiona notificaciones toast para feedback del usuario.

#### Uso BÃ¡sico
```typescript
// Ã‰xito
this.notificationService.showSuccess('OperaciÃ³n completada');

// Error
this.notificationService.showError('Error al procesar');

// InformaciÃ³n
this.notificationService.showInfo('InformaciÃ³n relevante');

// Warning (si estÃ¡ disponible)
this.notificationService.showWarning('Advertencia importante');
```

#### Patrones de Uso
```typescript
// En operaciones async
try {
  await this.customerService.createCustomer(data);
  this.notificationService.showSuccess('Cliente creado correctamente');
} catch (error) {
  this.notificationService.showError('Error al crear cliente');
}
```

### AuthService

#### PropÃ³sito
Gestiona autenticaciÃ³n, autorizaciÃ³n y roles de usuario.

#### Uso BÃ¡sico
```typescript
// Verificar si es usuario root
if (this.authService.isRoot()) {
  // LÃ³gica especÃ­fica para root
}

// Obtener perfil del usuario actual
const profile = this.authService.getCurrentUserProfile();
console.log('Role:', profile?.roleId);

// Verificar permisos
const canManage = profile?.roleId === 'root' || profile?.roleId === 'admin';
```

#### Uso en Templates
```typescript
// En componentes
get canViewCost(): boolean {
  const currentUser = this.authService.getCurrentUserProfile();
  return currentUser?.roleId === 'root' || currentUser?.roleId === 'admin';
}
```

```html
<!-- En templates -->
@if (canViewCost) {
  <div>InformaciÃ³n sensible</div>
}
```

---

## ðŸ”§ Patrones de ImplementaciÃ³n Comunes

### 1. Servicios Reactivos Multi-Tenant
```typescript
export class DataService {
  watchData(): Observable<T[]> {
    const isRoot = this.authService.isRoot();

    if (isRoot) {
      return this.rootBusinessSelector.selection$.pipe(
        switchMap(selection => {
          const businessId = selection.showAll ? null : selection.businessId;
          return businessId 
            ? this.databaseService.getWhere<T>('collection', 'businessId', '==', businessId)
            : of([]);
        })
      );
    } else {
      return from(this.businessService.getCurrentBusinessId()).pipe(
        switchMap(id => this.databaseService.getWhere<T>('collection', 'businessId', '==', id))
      );
    }
  }
}
```

### 2. Componentes con Modal Container
```typescript
export class PageComponent implements AfterViewInit {
  @ViewChild('modalContainer', { read: ViewContainerRef }) modalContainer!: ViewContainerRef;

  constructor(private modalService: ModalService) {}

  ngAfterViewInit() {
    this.modalService.setModalContainer(this.modalContainer);
  }
}
```

### 3. Filtros Neutrales por Defecto
```typescript
// ConfiguraciÃ³n de filtros que muestra todo por defecto
filters: FilterInterface = {
  search: '',
  type: null,      // Todos los tipos
  active: null,    // Todos los estados  
  category: null   // Todas las categorÃ­as
};
```

### 4. Manejo de Errores Consistente
```typescript
async executeOperation(): Promise<void> {
  try {
    await this.service.operation();
    this.notificationService.showSuccess('OperaciÃ³n exitosa');
  } catch (error) {
    console.error('Error:', error);
    this.notificationService.showError('Error en la operaciÃ³n');
  }
}
```

---

## ðŸ“‹ Checklist para Nuevos MÃ³dulos

### Servicios de Datos
- [ ] Implementar aislamiento por `businessId`
- [ ] Usar `RootBusinessSelectorService` para usuarios root
- [ ] Implementar mÃ©todos reactivos con `switchMap`
- [ ] Manejar usuarios root y no-root apropiadamente
- [ ] Incluir validaciÃ³n de negocio en operaciones CRUD

### Componentes de PÃ¡gina
- [ ] Configurar `ViewContainerRef` para `ModalService`
- [ ] Implementar `ngAfterViewInit` con `setModalContainer`
- [ ] Agregar `<div #modalContainer></div>` al template
- [ ] Verificar permisos basados en roles
- [ ] Implementar filtros neutros por defecto

### Componentes de Modal
- [ ] Implementar compatibilidad dual (directo + dinÃ¡mico)
- [ ] Usar `@Output() modalClosed` para binding directo
- [ ] Usar `try-catch` para `ModalService.closeModal()`
- [ ] Manejar datos de entrada apropiadamente

### Filtros y BÃºsqueda
- [ ] Configurar valores neutros por defecto (`null`, `''`)
- [ ] Implementar lÃ³gica condicional para valores neutros
- [ ] Proporcionar opciones "Todos" en selectores
- [ ] Hacer comportamiento evidente al usuario

### Error Handling
- [ ] Implementar try-catch en operaciones async
- [ ] Mostrar notificaciones apropiadas
- [ ] Registrar errores en console para debugging
- [ ] Manejar estados de loading y error